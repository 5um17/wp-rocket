(function(f,h){var a=h(f,f.document);f.lazySizes=a;"object"==typeof module&&module.exports?module.exports=a:"function"==typeof define&&define.amd&&define(a)})(window,function(f,h){if(h.getElementsByClassName){var a,O=h.documentElement,l=f.addEventListener,w=f.setTimeout,W=f.requestAnimationFrame||w,X=/^picture$/i,P=["load","error","lazyincluded","_lazyloaded"],I=function(c,a){var d=new RegExp("(\\s|^)"+a+"(\\s|$)");return c.className.match(d)&&d},J=function(c,a){I(c,a)||(c.className+=" "+a)},Q=function(a,
e){var d;if(d=I(a,e))a.className=a.className.replace(d," ")},C=function(a,e,d){var q=d?"addEventListener":"removeEventListener";d&&C(a,e);P.forEach(function(d){a[q](d,e)})},R=function(a,e,d,q,r){var g=h.createEvent("CustomEvent");g.initCustomEvent(e,!q,!r,d);g.details=g.detail;a.dispatchEvent(g);return g},S=function(c,e){var d;f.HTMLPictureElement||((d=f.picturefill||f.respimage||a.pf)?d({reevaluate:!0,reparse:!0,elements:[c]}):e&&e.src&&(c.src=e.src))},K=function(c,e,d){for(d=d||c.offsetWidth;d<
a.minSize&&e&&!c._lazysizesWidth;)d=e.offsetWidth,e=e.parentNode;return d},Y=function(c){var e,d=0,q=function(){e=!1;d=Date.now();c()},r=function(){w(q)},g=function(){W(r)};return function(){if(!e){var c=a.throttle-(Date.now()-d);e=!0;9>c&&(c=9);w(g,c)}}},N=function(){var c,e,d,q,r,g,B,n,x,v,y,p,T,K=/^img$/i,N=/^iframe$/i,P="onscroll"in f&&!/glebot/.test(navigator.userAgent),D=0,t=0,z=0,E=0,L=function(b){z--;b&&b.target&&C(b.target,L);if(!b||0>z||!b.target)z=0},k=Y(function(){var b,q,f,h,U,A,l,F,
Z,w=c.length;if(w&&(r=a.loadMode)){q=Date.now();b=E;t++;D<T&&1>z&&4<t&&2<r?(D=T,t=0):D=D!=p&&1<r&&3<t?p:0;for(;b<w;b++,E++)if(c[b]&&!c[b]._lazyRace)if(P){if((F=c[b].getAttribute("data-expand"))&&(A=1*F)||(A=D),!(6<z&&(!F||"src"in c[b]))){Z!==A&&(g=innerWidth+A,B=innerHeight+A,l=-1*A,Z=A);f=c[b].getBoundingClientRect();var m;if((m=(y=f.bottom)>=l&&(n=f.top)<=B&&(v=f.right)>=l&&(x=f.left)<=g&&(y||v||x||n))&&!(m=d&&3>z&&4>t&&!F&&2<r)){var u=c[b];m=A;var G=void 0,H=u,u="hidden"!=getComputedStyle(u,null).visibility;
n-=m;y+=m;x-=m;for(v+=m;u&&(H=H.offsetParent);)(u=0<(getComputedStyle(H,null).opacity||1))&&"visible"!=getComputedStyle(H,null).overflow&&(G=H.getBoundingClientRect(),u=v>G.left&&x<G.right&&y>G.top-1&&n<G.bottom+1);m=u}if(m)M(c[b],!1,f.width),E--,q++,U=!0;else{if(t&&3<Date.now()-q){E++;k();return}!U&&d&&!h&&3>z&&4>t&&2<r&&(e[0]||a.preloadAfterLoad)&&(e[0]||!F&&(y||v||x||n||"auto"!=c[b].getAttribute(a.sizesAttr)))&&(h=e[0]||c[b])}}}else M(c[b]);h&&!U&&M(h)}E=0}),aa=function(b){J(b.target,a.loadedClass);
Q(b.target,a.loadingClass);C(b.target,aa)},M=function(b,c,e){var f,g,r,h,k,n,l,m,u,B,x,t=b.currentSrc||b.src,p=K.test(b.nodeName),v=b.getAttribute(a.sizesAttr)||b.getAttribute("sizes"),y="auto"==v;if(!y&&d||!p||!t||b.complete||I(b,a.errorClass))b._lazyRace=!0,!(u=R(b,"lazybeforeunveil",{force:!!c})).defaultPrevented&&(n=b.getAttribute(a.srcsetAttr),k=b.getAttribute(a.srcAttr),p&&(l=b.parentNode,m=X.test(l.nodeName||"")),B=u.detail.firesLoad||"src"in b&&(n||k||m))&&(z++,C(b,L,!0)),W(function(){b._lazyRace&&
delete b._lazyRace;Q(b,a.lazyClass);v&&(y?(V.updateElem(b,!0,e),J(b,a.autosizesClass),n=b.getAttribute(a.srcsetAttr),k=b.getAttribute(a.srcAttr)):b.setAttribute("sizes",v));clearTimeout(q);q=w(L,2500);if(m)for(f=l.getElementsByTagName("source"),g=0,r=f.length;g<r;g++)(x=a.customMedia[f[g].getAttribute("data-media")||f[g].getAttribute("media")])&&f[g].setAttribute("media",x),(h=f[g].getAttribute(a.srcsetAttr))&&f[g].setAttribute("srcset",h);if(n)b.setAttribute("srcset",n);else if(k)if(N.test(b.nodeName)){var c=
b,d=k;try{c.contentWindow.location.replace(d)}catch(p){c.setAttribute("src",d)}}else b.setAttribute("src",k);(n||m)&&S(b,{src:k});!B||b.complete&&t==(b.currentSrc||b.src)?B&&L(u):(J(b,a.loadingClass),C(b,aa,!0));b=null})},ba=function(){var b,c=function(){a.loadMode=3;k()};d=!0;t+=8;a.loadMode=3;l("scroll",function(){3==a.loadMode&&(a.loadMode=2);clearTimeout(b);b=w(c,99)},!0)};return{_:function(){for(var b=h.querySelectorAll("["+a.srcAttr+"]:not(.lazyload)"),g=0;g<b.length;g++)b[g].className+=" "+
a.lazyClass;c=h.getElementsByClassName(a.lazyClass);e=h.getElementsByClassName(a.lazyClass+" "+a.preloadClass);p=a.expand;T=Math.round(p*a.expFactor);l("scroll",k,!0);l("resize",k,!0);f.MutationObserver?(new MutationObserver(k)).observe(O,{childList:!0,subtree:!0,attributes:!0}):(O.addEventListener("DOMNodeInserted",k,!0),O.addEventListener("DOMAttrModified",k,!0),setInterval(k,999));l("hashchange",k,!0);"focus mouseover click load transitionend animationend webkitAnimationEnd".split(" ").forEach(function(b){h.addEventListener(b,
k,!0)});(d=/d$|^c/.test(h.readyState))?ba():(l("load",ba),h.addEventListener("DOMContentLoaded",k));k()},checkElems:k,unveil:M}}(),V=function(){var c,e=function(a,c,d){var e,f,h;if(e=a.parentNode)if(d=K(a,e,d),c=R(a,"lazybeforesizes",{width:d,dataAttr:!!c}),!c.defaultPrevented&&(d=c.detail.width)&&d!==a._lazysizesWidth){a._lazysizesWidth=d;d+="px";a.setAttribute("sizes",d);if(X.test(e.nodeName||""))for(e=e.getElementsByTagName("source"),f=0,h=e.length;f<h;f++)e[f].setAttribute("sizes",d);c.detail.dataAttr||
S(a,c.detail)}},d=Y(function(){var a,d=c.length;if(d)for(a=0;a<d;a++)e(c[a])});return{_:function(){c=h.getElementsByClassName(a.autosizesClass);l("resize",d)},checkElems:d,updateElem:e}}(),p=function(){p.i||(p.i=!0,V._(),N._())};(function(){var c,e={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",srcAttr:"data-lazy-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},
init:!0,expFactor:2,expand:374,loadMode:2,throttle:99};a=f.lazySizesConfig||f.lazysizesConfig||{};for(c in e)c in a||(a[c]=e[c]);f.lazySizesConfig=a;w(function(){a.init&&p()})})();return{cfg:a,autoSizer:V,loader:N,init:p,uP:S,aC:J,rC:Q,hC:I,fire:R,gW:K}}});